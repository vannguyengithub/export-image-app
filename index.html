<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMG APP</title>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div class="container">
        <input type="text" id="inputName" placeholder="Enter your name">
        <button id="clearButton">Clear</button>
        <div class="export_btn">
            <button id="exportButton">Export Image</button>
        </div>
        <div id="outputImageContainer"></div>
    </div>
    
    
    <!-- <script src="./assets/js/main.js"></script> -->
    <script>
        const inputName = document.getElementById("inputName");
        const outputImageContainer = document.getElementById("outputImageContainer");
        let imageDataURL = "";
  
        function updateImage() {
          const name = inputName.value;
  
          const canvas = document.createElement("canvas");
          canvas.width = 1033; // Tăng chiều rộng canvas để chứa biểu tượng
          canvas.height = 657;
          const ctx = canvas.getContext("2d");
        
          // 
          ctx.fillStyle = "#ffffff"; //
          ctx.fillRect(0, 0, canvas.width, canvas.height);
  
          // 
          const font = "SVNGilroy";
          const color = "#0a1b2b";
  
          // 
          ctx.fillStyle = color;
          ctx.font = "bold 50px " + font;
          const textWidth = ctx.measureText(name).width;
          const textHeight = 24; //
  
          // 
          const x = (canvas.width - textWidth) / 2;
          const y = (canvas.height - textHeight) / 2;
  
          //
          ctx.fillText(name, x, y);
  
          // 
          const icon = new Image();
          icon.src = "assets/images/icon.svg"; //
          const iconSize = 20;
          const iconX = x + textWidth - 23;
          const iconY = y - 56;
  
          icon.onload = function () {
            ctx.drawImage(icon, iconX, iconY, iconSize, iconSize);
            imageDataURL = canvas.toDataURL("image/png");
            outputImageContainer.innerHTML = `<img src="${imageDataURL}">`;
          };
        }
        
        inputName.addEventListener("input", updateImage);
        
        function clearInput() {
          inputName.value = ''; 
          updateImage();
        }
        
        document.getElementById("clearButton").addEventListener("click", clearInput);
  
        document.getElementById("exportButton").addEventListener("click", function() {
          if (imageDataURL) {
            const downloadLink = document.createElement("a");
            downloadLink.download = "image.png";
            downloadLink.href = imageDataURL;
            downloadLink.click();
          }
        });
      </script>
</body>
</html>